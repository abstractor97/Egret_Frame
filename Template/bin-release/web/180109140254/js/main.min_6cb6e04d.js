var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(t){o(t)}}function a(e){try{l(r["throw"](e))}catch(t){o(t)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){l.label=n[1];break}if(6===n[0]&&l.label<s[1]){l.label=s[1],s=n;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(n);break}s[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(r){n=[6,r],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},Scene=function(e){function t(){var t=e.call(this)||this;return t.TAG="",t.TAG=egret.getQualifiedClassName(t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.init,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onDestroy,t),t}return __extends(t,e),t.prototype.init=function(){console.log(this.TAG+" init"),this._isRunning=!0},t.prototype.onEnterTransitionDidFinish=function(){},t.prototype.onExitTransitionDidStart=function(){},t.prototype.onDestroy=function(){console.log(this.TAG+" onDestroy"),this.removeChildren()},t}(eui.UILayer);__reflect(Scene.prototype,"Scene");var Single=function(){function e(){}return e.getInstance=function(){var e=egret.getQualifiedClassName(this),t=egret.getDefinitionByName(e);return this._instance||(this._instance=new t),this._instance},e}();__reflect(Single.prototype,"Single");var SceneConst;!function(e){e[e.LoadScene=0]="LoadScene",e[e.LoginScene=1]="LoginScene",e[e.HallScene=2]="HallScene",e[e.GameScene=3]="GameScene"}(SceneConst||(SceneConst={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),this.startAnimation(e),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){SceneManager.Instance.runWithScene(SceneConst[SceneConst.HallScene])},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function i(e){t.call(r,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(r,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var SceneManager=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._runningScene=null,t._scenesStack=[],t._nextScene=null,t}return __extends(t,e),Object.defineProperty(t,"Instance",{get:function(){return this.getInstance()},enumerable:!0,configurable:!0}),t.prototype.runWithScene=function(e){console.assert(null!=e,"This command can only be used to start the SceneManager. There is already a scene present."),console.assert(null==this._runningScene,"_runningScene should be null"),this.pushScene(e)},t.prototype.pushScene=function(e){console.assert(null!=e,"the scene should not null"),this._sendCleanupToScene=!1;var t=egret.getDefinitionByName(e),n=new t;this._scenesStack.push(n),this._nextScene=n,this._setNextScene()},t.prototype._setNextScene=function(){egret.MainContext.instance.stage.addChild(this._nextScene),this._runningScene&&this._runningScene.onExitTransitionDidStart(),this._nextScene.onEnterTransitionDidFinish(),this._sendCleanupToScene&&this._runningScene&&this._runningScene.parent.removeChild(this._runningScene),this._runningScene=this._nextScene,this._nextScene=null},t}(Single);__reflect(SceneManager.prototype,"SceneManager");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ScrollerList=function(e){function t(){var t=e.call(this)||this;return t._list=new eui.List,t._scroller=new eui.Scroller,t._scroller.bounces=!1,t._scroller.viewport=t._list,t.addChild(t._scroller),t.addEventListener(egret.Event.RESIZE,t._onResize,t),t._list.addEventListener(eui.ItemTapEvent.ITEM_TAP,t._onItemTap,t),t}return __extends(t,e),t.prototype._onResize=function(){this._scroller.width=this.width,this._scroller.height=this.height},t.prototype._onItemTap=function(e){this.dispatchEvent(e)},Object.defineProperty(t.prototype,"dataProvider",{get:function(){return this._list.dataProvider},set:function(e){this._list.dataProvider=e,this.addEventListener(egret.Event.ENTER_FRAME,this._onEnterFrame,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemRender",{get:function(){return this._list.itemRenderer},set:function(e){this._list.itemRenderer=e,this.addEventListener(egret.Event.ENTER_FRAME,this._onEnterFrame,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemRendererSkinName",{get:function(){return this._list.itemRendererSkinName},set:function(e){this._list.itemRendererSkinName=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this._list.selectedIndex},set:function(e){this._list.selectedIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this._list.selectedItem},set:function(e){this._list.selectedItem=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMultipleSelection",{get:function(){return this._list.allowMultipleSelection},set:function(e){this._list.allowMultipleSelection=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndices",{get:function(){return this._list.selectedIndices},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useVirtualLayout",{get:function(){return this._list.useVirtualLayout},set:function(e){this._list.useVirtualLayout=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._list.layout},set:function(e){this._list.layout=e},enumerable:!0,configurable:!0}),t.prototype.getTileLayout=function(){return new eui.TileLayout},t.prototype.getVerticalLayout=function(){return new eui.VerticalLayout},t.prototype._onEnterFrame=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this._onEnterFrame,this),this._onResize();var e=this._list.dataProvider,t=this._doDateTxt;e&&0==e.length&&(t||(t=this._doDateTxt=new eui.Label("目前列表为空"),t.size=18,this.addChild(t),t.horizontalCenter=0,t.verticalCenter=0)),t&&(t.visible=0==e.length)},t}(eui.Component);__reflect(ScrollerList.prototype,"ScrollerList");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?r(i):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var HallMenu=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.menu_list.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onItemTap,this)},t.prototype._onItemTap=function(e){console.log(e.itemIndex)},t}(eui.Component);__reflect(HallMenu.prototype,"HallMenu");var Rank=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=[],n=0;100>n;n++){var r={};r.No=n,r.name="lucy"+n,t.push(r)}var i=new eui.VerticalLayout;this.rankList.layout=i;var o=new eui.ArrayCollection(t);this.rankList.dataProvider=o},t}(eui.Component);__reflect(Rank.prototype,"Rank");var PlayerStateItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dataChanged=function(){this.usernameTxt.text=this.data.username,this.onlineTxt.text=1==this.data.online?"在线":"离线"},t}(eui.ItemRenderer);__reflect(PlayerStateItemRender.prototype,"PlayerStateItemRender");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var HallLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="Skin.Hall",t.percentWidth=100,t.percentHeight=100,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this);for(var t=[],n=0;100>n;n++){var r={};r.name=n,r.price=100+n,t.push(r)}this.player.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._onItemTap,this),this.gameEntryList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._onItemTap,this),this.menu_list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this._onItemTap,this),this.virtuallayout.addEventListener(egret.Event.CHANGE,this._onChange,this),this.btn_new.addEventListener(egret.TouchEvent.TOUCH_TAP,this._onBtnNewClick,this),this.virtual.text=1==this.player.useVirtualLayout?"开启":"关闭";var i=this.player.getVerticalLayout();i.horizontalAlign=eui.JustifyAlign.JUSTIFY,this.player.layout=i,this.arrCol=new eui.ArrayCollection(t),this.player.dataProvider=this.arrCol},t.prototype._onChange=function(e){this.virtuallayout.selected?this.player.useVirtualLayout=!0:this.player.useVirtualLayout=!1,this.virtuallayout.selected?this.virtual.text="开启":this.virtual.text="关闭",console.log(this.virtual.text)},t.prototype._onItemTap=function(e){console.log(e.itemIndex);var t=new ShopLayer;this.addChild(t)},t.prototype._onBtnNewClick=function(){console.log(this.arrCol.getItemAt(0));var e=this.arrCol.getItemAt(0);console.log(this.arrCol.getItemIndex(e))},t}(eui.Component);__reflect(HallLayer.prototype,"HallLayer");var ShopLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="skins.Shop",t}return __extends(t,e),t}(eui.Component);__reflect(ShopLayer.prototype,"ShopLayer");var HallScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){var e=new HallLayer;this.addChild(e)},t}(Scene);__reflect(HallScene.prototype,"HallScene");